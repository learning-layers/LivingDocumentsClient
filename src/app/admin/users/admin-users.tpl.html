<div id="admin-users">
    <tabset>
        <tab>
            <tab-heading>
                Users <span class="badge">{{users.length}}</span>
            </tab-heading>
            <button class="btn btn-default" ng-click="getUsers()">Refresh</button>
            <table class="table table-striped table-hover table-condensed">
                <th>#</th>
                <th>Change Status/Delete</th>
                <th>Change Role</th>
                <th>Domain/Organisation</th>
                <th>Firstname</th>
                <th>Lastname</th>
                <th>Email</th>
                <th>Displayname</th>
                <tr ng-repeat="user in users">
                    <td>{{ $index + 1 }}</td>
                    <td>
                        Status
                        <script type="text/ng-template" id="DeleteUserModalContent.html">
                            <div ng-init="deleteInput = ''" class="modal-header">
                                <h3>Delete User</h3>
                            </div>
                            <div class="modal-body">
                                If you really want to delete the user: {{ username }}
                                Type 'delete' into this text field <input type="text" ng-model="deleteInput">
                            </div>
                            <div class="modal-footer">
                                <button class="btn btn-primary" ng-click="ok(deleteInput)">OK</button>
                                <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
                            </div>
                        </script>
                        <button class="btn btn-danger" ng-click="openDeleteUser(user.id, user)"><span class="glyphicon glyphicon-remove"></span></button>
                    </td>
                    <td>
                        <select ng-model="user.newUserRole">
                            <option ng-repeat="role in roles"
                                    value="{{role.name}}">
                              {{role.name}}
                            </option>
                        </select>
                        <button class="btn btn-default" ng-click="setNewRole(user, user.newUserRole)">Set</button>
                    
                        <!-- <div ng-if="roles.length > 0">
                            <select ng-init="" ng-model="user.newUserRole" ng-selected="" ng-options="role.name for role in roles">
                            </select>
                        </div> -->
                    </td>
                    <td>{{ user.domain }}</td>
                    <td>{{ user.firstname }}</td>
                    <td>{{ user.surname }}</td>
                    <td>{{ user.email }}</td>
                    <td>{{ user.displayname }}</td>
                </tr>
            </table>
        </tab>
        <tab>
            <tab-heading>
                Registrations <span class="badge">{{registrations.length}}</span>
            </tab-heading>
            <button class="btn btn-default" ng-click="getRegistrations()">Refresh</button>
            <table class="table table-striped table-hover table-condensed">
                <th>#</th>
                <th>Approve/Reject</th>
                <th>Domain/Organisation</th>
                <th>Firstname</th>
                <th>Lastname</th>
                <th>Email</th>
                <th>Registration Description</th>
                <th>Displayname</th>
                <tr ng-repeat="registration in registrations">
                    <td>{{ $index + 1 }}</td>
                    <td>
                        <button class="btn btn-success" ng-click="approveRegistration(registration.id, registration)"><span class="glyphicon glyphicon-ok"></span></button>
                        <script type="text/ng-template" id="DeleteRegistrationModalContent.html">
                            <div ng-init="deleteInput = ''" class="modal-header">
                                <h3>Reject Registration</h3>
                            </div>
                            <div class="modal-body">
                                If you really want to reject the registration:
                                Type 'delete' into this text field <input type="text" ng-model="deleteInput">
                            </div>
                            <div class="modal-footer">
                                <button class="btn btn-primary" ng-click="ok(deleteInput)">OK</button>
                                <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
                            </div>
                        </script>
                        <button class="btn btn-danger" ng-click="openRejectRegistration(registration.id, registration)"><span class="glyphicon glyphicon-remove"></span></button>
                    </td>
                    <td>{{ registration.domain }}</td>
                    <td>{{ registration.firstname }}</td>
                    <td>{{ registration.lastname }}</td>
                    <td>{{ registration.email }}</td>
                    <td>{{ registration.registrationDescription }}</td>
                    <td>{{ registration.displayname }}</td>
                </tr>
            </table>
        </tab>
    </tabset>
</div>