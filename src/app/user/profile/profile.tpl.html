<div id="userprofile">
    <div ng-show="isOwner" class="row">
        <div ng-switch on="editMode">
            <div ng-switch-when="false">
                <div class="alert alert-info" ng-click="$parent.editMode = !$parent.editMode">
                    You are currently viewing your own profile, if you want to edit it click <button class="btn btn-link">here</button>.
                </div>
            </div>
            <div ng-switch-when="true">
                <div class="alert alert-success" ng-click="$parent.editMode = !$parent.editMode">
                    Return <button class="btn btn-link">here</button> to see how your profile looks like to others.
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-12">
            <div class="col-lg-8">
                <div class="panel panel-default">
                    <div class="panel-heading panel-heading-sm">
                        <h4>{{ userprofile.displayname }}'s user profile</h4>
                        <div class="pull-right">
                            <button ng-show="isOwner" class="btn btn-info" ng-click="editMode = !editMode">
                                <span ng-show="!editMode" class="glyphicon glyphicon-pencil"></span>
                                <span ng-show="!editMode"> Edit</span>
                                <span ng-show="editMode" class="glyphicon glyphicon-eye-open"></span>
                                <span ng-show="editMode"> View</span>
                            </button>
                        </div>
                        <div style="clear: both"></div>
                    </div>
                    <div class="panel-body panel-body-sm">
                        <div class="pull-left first-col">
                            <div class="userprofile-avatar thumbnail">
                                <img class="profileimg img-responsive" ng-src="{{ profileImgSrc }}">
                                <div ng-show="editMode" ng-controller="ProfileImageUploadCtrl">
                                  <input type="text" ng-model="myModelObj">
                                  <input type="file" ng-file-select="onFileSelect($files)">
                                  <!-- <input type="file" ng-file-select="onFileSelect($files)" multiple>
                                  <div ng-file-drop="onFileSelect($files)" ng-file-drag-over-class="optional-css-class" 
                                        ng-show="dropSupported">drop files here</div> -->
                                  <div ng-file-drop-available="dropSupported=true" 
                                        ng-show="!dropSupported">HTML5 Drop File is not supported!</div>
                                  <button ng-click="upload.abort()">Cancel Upload</button>
                                </div>
                            </div>
                            <script type="text/ng-template" id="AddUserTagModalContent.html">
                                <div ng-init="deleteInput = ''" class="modal-header">
                                    <h3>Add User Tag</h3>
                                </div>
                                <div class="modal-body">
                                    <label for="tagname">Tagname:</label><input name="tagname" ng-model="tagname">
                                </div>
                                <div class="modal-footer">
                                    <button class="btn btn-primary" ng-click="ok(tagname)">OK</button>
                                    <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
                                </div>
                            </script>
                            <button class="btn btn-default btn-add-tag" ng-click="openAddTag()"><span class="glyphicon glyphicon-plus-sign"></span> Add tag</button>
                            <div class="well well-sm">
                                <a href="" ng-repeat="usertag in usertags" class="tag btn btn-warning" ng-disabled="!editMode">
                                    <span class="glyphicon glyphicon-tag"></span> {{ usertag.name }} 
                                    <button ng-if="editMode" class="btn btn-danger" ng-click="deleteTag(userprofile.id, usertag.name)">
                                        <span class="glyphicon glyphicon-trash"></span>
                                    </button>
                                </a>
                            </div>
                        </div>
                        <div class="pull-left second-col">
                            <edit-input-text ng-show="editMode" edit-mode="editMode" label="Displayname" fieldname="displayname" value="userprofile.displayname"  save-method="saveEdit"></edit-input-text>
                            <edit-input-text edit-mode="editMode" label="Firstname" fieldname="firstname" value="userprofile.firstname" save-method="saveEdit"></edit-input-text>
                            <edit-input-text edit-mode="editMode" label="Lastname" fieldname="lastname" value="userprofile.lastname"  save-method="saveEdit"></edit-input-text>
                            <edit-input-text ng-show="editMode" edit-mode="editMode" label="Email" fieldname="email" value="userprofile.email"  save-method="saveEdit"></edit-input-text>
                            <edit-input-textarea edit-mode="editMode" label="Description" fieldname="description" value="userprofile.description"  save-method="saveEdit"></edit-input-textarea>
                        </div>
                        <div style="clear: both"></div>
                    </div>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="panel panel-default">
                    <div class="panel-heading panel-heading-sm">
                        <h4>{{ userprofile.displayname }}'s created and edited documents</h4>
                    </div>
                    <div class="panel-body panel-body-sm">
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>