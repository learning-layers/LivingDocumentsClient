<div class="flip-container document-content-panel flip-panel document-content-panel-turn-around" ng-class="{'flip-container-turned':attachmentsActive}">
    <div class="flipper">
        <div class="front panel panel-default doc-content-panel">
            <div ng-if="!attachmentsActive" class="panel-heading panel-heading-sm">
                <div class="row first-row">
                    <button class="btn btn-info pull-left" ng-click="switchToAttachments()"><span class="glyphicon glyphicon-paperclip"></span>Attachments<span class="badge">{{ document.attachmentCount }}</span></button>
                    <div id="documentContentMaturityIndicator" class="pull-left demo-hidden">
                        <div class="maturity-low"></div>
                        <div class="maturity-mid"></div>
                        <div class="maturity-high"></div>
                        <div class="maturity-norm"></div>
                    </div>
                </div>
                <div class="row second-row">
                    <div class="btn-group">
                        <button class="btn btn-default" ng-click="openUserInfoModal(document.owner.id)"><span class="glyphicon glyphicon-user"></span>Owner: {{ document.owner.displayname }}</button>
                        <button class="btn btn-default" ng-click="openAuthorList()">Authors<span class="badge badge-grey demo-hidden">{{ documentContent.content.authors.length }}</span></button>
                        <button class="btn btn-default" ng-click="openViewerList()">Viewers<span class="badge badge-grey demo-hidden">{{ document.viewers.length }}</span></button>
                        <!--on 2014-01-27 15:59:01 augmented by ; last update at 2014-01-27 15:59:01 -->
                    </div>
                    <button class="btn btn-default demo-hidden"><span class="glyphicon glyphicon-info-sign"></span>More information</button>
                </div>
            </div>
            <div class="panel-body panel-body-sm">
                <div class="btn-group">
                    <button ng-show="!editorActive" class="btn btn-default" ng-click="editorActive = !editorActive">
                        <span class="glyphicon glyphicon-pencil"></span> Edit content
                    </button>
                    <button ng-show="editorActive" class="btn btn-success" ng-click="saveEditorContent()">
                        <span class="glyphicon glyphicon-hdd"></span> Save
                    </button>
                    <button ng-show="editorActive" class="btn btn-danger" ng-click="editorActive = !editorActive">
                        <span class="glyphicon glyphicon-remove"></span><span ng-show="editorActive"> Cancel</span>
                    </button>
                </div>
                <div style="position: static" ng-right-click="showContextMenu($event)">
                    <div ng-if="!editorActive" class="form-control editor" ng-bind-html="documentContent.content.content">
                    </div>
                </div>
                <div ng-if="editorActive" class="editor-wrapper" ng-click="summernoteAreaClick()">
                    <div summernote="" config="options"></div>
                    <div ng-init="setEditorContent()"></div>
                </div>
            </div>
        </div>
        <div class="back">
            <div ng-if="attachmentsActive" class="panel panel-default doc-content-panel">
                <div class="panel-heading panel-heading-sm">
                    <div class="btn-group">
                        <button class="btn btn-info" ng-click="switchToDocumentContent()"><span class="glyphicon glyphicon-arrow-left"></span>Back</button>
                        <button class="btn btn-default" ng-click="openAttachmentUploadModal()"><span class="glyphicon glyphicon-upload"></span>Upload new attachment</button>
                    </div>
                </div>
                <div class="panel-body">
                    <div tabset="">
                        <div tab="" active="tabs.historyActive">
                            <div tab-heading="">
                                <i class="glyphicon glyphicon-time"></i> Activity history <span class="badge">2</span>
                            </div>
                            <table class="table table-striped table-hover table-condensed">
                                <th>Description</th>
                                <th>Date</th>
                                <th>Editor</th>
                                <tr>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                            </table>
                        </div>
                        <div tab="" active="tabs.filesActive">
                            <div tab-heading="">
                                <i class="glyphicon glyphicon-file"></i> Files <span class="badge">{{ attachments.files.length }}</span>
                            </div>
                            <table class="table table-striped table-hover table-condensed">
                                <th>#</th>
                                <th>Filename</th>
                                <th>Size</th>
                                <th>Options</th>
                                <tr ng-repeat="file in attachments.files">
                                    <td>{{ $index + 1 }}</td>
                                    <td>
                                        <span ng-hide="file.editmode">{{ file.name }}</span>
                                        <span ng-show="file.editmode"><input type="text" class="form-control" ng-model="file.name"></span>
                                    </td>
                                    <td>{{ file.size }}</td>
                                    <td>
                                        <div class="btn-group">
                                            <button ng-show="file.editmode" class="btn btn-danger" ng-click="triggerEditMode('cancel', 'file', file, 'name', file.name)">
                                                <span style="font-weight: bold">&times;</span>
                                                 Cancel
                                            </button>
                                            <button ng-show="file.editmode" class="btn btn-success" ng-click="triggerEditMode('save', 'file', file, 'name', file.name)">
                                                <span class="glyphicon glyphicon-hdd"></span>
                                                Save
                                            </button>
                                        </div>
                                        <div class="btn-group">
                                            <button class="btn btn-default" ng-click="downloadFileAttachment(file.id)">
                                                <span class="glyphicon glyphicon-download-alt"></span>
                                                 Download
                                            </button>
                                            <button ng-hide="file.editmode" class="btn btn-default" ng-click="triggerEditMode('edit', 'file', file, 'name', file.name)">
                                                <span class="glyphicon glyphicon-pencil"></span>
                                                 Edit
                                            </button>
                                            <button ng-hide="file.editmode" ng-show="file.creatorId === SecurityService.currentUser.id"
                                                    class="btn btn-danger"
                                                    ng-click="deleteFileAttachment(file.id, file.name)">
                                                <span class="glyphicon glyphicon-trash"></span>
                                                Delete
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div tab="" active="tabs.imgAVidsActive">
                            <div tab-heading="">
                                <i class="glyphicon glyphicon-picture"></i>/<i class="glyphicon glyphicon-film"></i> Images + Videos <span class="badge">2</span>
                            </div>
                            <div id="imgView" ng-init="imgGalleryActive = 'false'">
                                <div class="btn-group img-view-viewmode">
                                    <button class="btn btn-default" ng-click="imgGalleryActive = 'false'" ng-class="{'active': imgGalleryActive == 'false'}"><span class="glyphicon glyphicon-list-alt"></span></button>
                                    <button class="btn btn-default" ng-click="imgGalleryActive = 'true'" ng-class="{'active': imgGalleryActive == 'true'}"><span class="glyphicon glyphicon-picture"></span></button>
                                </div>
                                <div id="img-info-table" ng-if="imgGalleryActive == 'false'">
                                    <table class="table table-striped table-hover table-condensed">
                                        <th>#</th>
                                        <th>Filename</th>
                                        <th>Size</th>
                                        <th>Options</th>
                                        <tr ng-repeat="file in attachments.files">
                                            <td>{{ $index + 1 }}</td>
                                            <td>{{ file.name }}</td>
                                            <td>{{ file.size }}</td>
                                            <td>
                                                <button class="btn btn-default" ng-click="downloadFileAttachment(file.id)">Download</button>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                                <div class="img-gallery" ng-if="imgGalleryActive">
                                    <img class="img-thumbnail" ng-repeat="img in attachments.images" alt="Image gallery placeholder" >
                                </div>
                            </div>
                        </div>
                        <div tab="" active="tabs.linksActive">
                            <div tab-heading="">
                                <i class="glyphicon glyphicon-link"></i> Links <span class="badge">{{ attachments.hyperlinks.length }}</span>
                            </div>
                            <table class="table table-striped table-hover table-condensed">
                                <th>#</th>
                                <th>URL</th>
                                <th>Description</th>
                                <th>Options</th>
                                <tr ng-repeat="hyperlink in attachments.hyperlinks">
                                    <td>{{ $index + 1 }}</td>
                                    <td><a href="{{ hyperlink.hyperlink }}" target="_blank">{{ hyperlink.hyperlink }}</a></td>
                                    <td>{{ hyperlink.description }}</td>
                                    <td></td>
                                </tr>
                            </table>
                        </div>
                        <div tab="" active="tabs.relDocsActive">
                            <div tab-heading="">
                                <i class="glyphicon glyphicon-file"></i> Related docs <span class="badge">3</span>
                            </div>
                            <table class="table table-striped table-hover table-condensed">
                                <th>#</th>
                                <th>Document title</th>
                                <th>Options</th>
                                <tr>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>